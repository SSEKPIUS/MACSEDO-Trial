exports.ids = [69];
exports.modules = {

/***/ 124:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/@nuxt/webpack/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/@nuxt/webpack/node_modules/vue-loader/lib??vue-loader-options!./components/reception/AddGuest.vue?vue&type=template&id=2d55c02a&scoped=true&
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"p-10 shadow-xl shadow-yellow-300 w-6/12 sm:w-1/2 rounded-xl h-auto"},[_vm._ssrNode("<div class=\"m-2\" data-v-2d55c02a><h1 class=\"font-black text-yellow-800\" data-v-2d55c02a>\n      New Guest\n    </h1></div> "),_vm._ssrNode("<div data-v-2d55c02a>","</div>",[_vm._ssrNode("<form data-v-2d55c02a>","</form>",[_vm._ssrNode("<div class=\" flex flex-row\" data-v-2d55c02a><div class=\"p-2 text-sm w-1/2\" data-v-2d55c02a><label for=\"FullName\" class=\"font-bold text-yellow-800 text-sm\" data-v-2d55c02a>FullName</label> <input id=\"FullName\" type=\"text\" required=\"required\""+(_vm._ssrAttr("value",(_vm.form.fullname)))+" class=\"py-3 pr-3 w-full border-b-2 border-gray-200 focus:outline-none hover:border-yellow-300\" data-v-2d55c02a></div> <div class=\"p-2 text-sm w-1/2\" data-v-2d55c02a><label for=\"Email\" class=\"font-bold text-yellow-800 text-sm\" data-v-2d55c02a>Email</label> <input id=\"Email\" type=\"email\" required=\"required\""+(_vm._ssrAttr("value",(_vm.form.email)))+" class=\"py-3 pr-3 w-full border-b-2 border-gray-200 focus:outline-none hover:border-yellow-300\" data-v-2d55c02a></div></div> "),_vm._ssrNode("<div class=\" flex flex-row\" data-v-2d55c02a>","</div>",[_vm._ssrNode("<div class=\"p-2 text-sm w-1/2\" data-v-2d55c02a>","</div>",[_vm._ssrNode("<label for=\"IDType\" class=\"font-bold text-yellow-800 text-sm\" data-v-2d55c02a>ID Type</label> "),_c('select',{directives:[{name:"model",rawName:"v-model",value:(_vm.form.idType),expression:"form.idType"}],staticClass:"py-3 pr-3 w-full border-b-2 border-gray-200 focus:outline-none hover:border-yellow-300",attrs:{"id":"IDType","name":"","required":""},on:{"change":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return val}); _vm.$set(_vm.form, "idType", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{"value":"National ID"}},[_vm._v("\n              National ID\n            ")]),_vm._v(" "),_c('option',{attrs:{"value":"PassPort"}},[_vm._v("\n              PassPort\n            ")]),_vm._v(" "),_c('option',{attrs:{"value":"Drivers Permit"}},[_vm._v("\n              Drivers Permit\n            ")])])],2),_vm._ssrNode(" <div class=\"p-2 text-sm w-1/2\" data-v-2d55c02a><label for=\"IDNumber\" class=\"font-bold text-yellow-800 text-sm\" data-v-2d55c02a>NIN/PassPort/Drivers Permit Number</label> <input id=\"IDNumber\" type=\"text\" required=\"required\""+(_vm._ssrAttr("value",(_vm.form.idNum)))+" class=\"py-3 pr-3 w-full border-b-2 border-gray-200 focus:outline-none hover:border-yellow-300\" data-v-2d55c02a></div>")],2),_vm._ssrNode(" <div class=\"p-2 flex flex-row\" data-v-2d55c02a><div class=\"p-2 mb-3 text-sm w-full\" data-v-2d55c02a><label for=\"AOB\" class=\"font-bold text-yellow-800\" data-v-2d55c02a>Any Other Information</label> <textarea id=\"AOB\" type=\"text\" required=\"required\" class=\"py-3 pr-3 w-full border-b-2 border-gray-200 focus:outline-none hover:border-yellow-300\" data-v-2d55c02a>"+_vm._ssrEscape(_vm._s(_vm.form.aob))+"</textarea></div></div> "),_vm._ssrNode("<div class=\"p-2 flex flex-row\" data-v-2d55c02a>","</div>",[_vm._ssrNode("<div class=\"p-2 mb-3 text-sm w-1/2\" data-v-2d55c02a>","</div>",[_vm._ssrNode("<label for=\"rooms\" class=\"text-sm text-yellow-800 font-bold\" data-v-2d55c02a>Select Room</label> "),_c('select',{directives:[{name:"model",rawName:"v-model",value:(_vm.form.Room),expression:"form.Room"}],staticClass:"py-3 pr-3 w-full border-b-2 border-gray-200 focus:outline-none hover:border-yellow-300",attrs:{"id":"rooms","name":"","required":""},on:{"change":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return val}); _vm.$set(_vm.form, "Room", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.roomlistFiltered),function(room,i){return _c('option',{key:i,domProps:{"value":room}},[_vm._v("\n              "+_vm._s(room.roomNo)+" "+_vm._s(room.type)+" "+_vm._s(room.beds)+" Beds\n            ")])}),0)],2),_vm._ssrNode(" <div class=\"p-2 text-sm w-1/2\" data-v-2d55c02a><label for=\"fee\" class=\"font-bold text-yellow-800 text-sm\" data-v-2d55c02a>Type</label> <div class=\"py-3 pr-3 w-full border-b-2 border-gray-200 focus:outline-none hover:border-yellow-300\" data-v-2d55c02a>"+_vm._ssrEscape("\n            "+_vm._s(_vm.rtype)+"\n          ")+"</div></div>")],2),_vm._ssrNode(" <div class=\"p-2 flex flex-row\" data-v-2d55c02a><div class=\"p-2 text-sm w-1/2\" data-v-2d55c02a><label for=\"fee\" class=\"font-bold text-yellow-800 text-sm\" data-v-2d55c02a>Fee/Day</label> <div class=\"py-3 pr-3 w-full border-b-2 border-gray-200 focus:outline-none hover:border-yellow-300\" data-v-2d55c02a>"+_vm._ssrEscape("\n            "+_vm._s(_vm.fee)+"\n          ")+"</div></div> <div class=\"p-2 text-sm w-1/2\" data-v-2d55c02a><label for=\"fee\" class=\"font-bold text-yellow-800 text-sm\" data-v-2d55c02a>Days</label> <input type=\"Number\" min=\"1\" max=\"365\" required=\"required\""+(_vm._ssrAttr("value",(_vm.form.rdays)))+" class=\"py-3 pr-3 w-full border-b-2 border-gray-200 focus:outline-none hover:border-yellow-300\" data-v-2d55c02a></div></div> <div class=\"text-sm p-2\" data-v-2d55c02a></div> <div class=\"my-3\" data-v-2d55c02a><button type=\"submit\" class=\"p-3 bg-green-500 text-white rounded-lg px-32\" data-v-2d55c02a>\n          Submit\n        </button> <button class=\"p-3 bg-red-500 text-white rounded-lg px-32\" data-v-2d55c02a>\n          Cancel\n        </button></div>")],2)])],2)}
var staticRenderFns = []


// CONCATENATED MODULE: ./components/reception/AddGuest.vue?vue&type=template&id=2d55c02a&scoped=true&

// EXTERNAL MODULE: external "lodash"
var external_lodash_ = __webpack_require__(16);
var external_lodash_default = /*#__PURE__*/__webpack_require__.n(external_lodash_);

// EXTERNAL MODULE: external "vuex"
var external_vuex_ = __webpack_require__(3);

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/@nuxt/webpack/node_modules/vue-loader/lib??vue-loader-options!./components/reception/AddGuest.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

/* eslint-disable eqeqeq */

/* eslint-disable no-console */

/* eslint-disable vue/require-prop-types */


/* harmony default export */ var AddGuestvue_type_script_lang_js_ = ({
  name: 'AddGuest',

  data() {
    return {
      form: {
        fullname: '',
        Room: '',
        idType: '',
        idNum: '',
        aob: '',
        email: '',
        rdays: 1
      },
      fee: '0',
      rtype: 'null'
    };
  },

  computed: { ...Object(external_vuex_["mapGetters"])(['rooms', 'getToken']),

    formRoom() {
      return this.form.Room;
    },

    roomlistFiltered() {
      return external_lodash_default.a.filter(this.rooms, r => {
        return r.occupied == false;
      });
    }

  },
  watch: {
    formRoom(newVal) {
      this.fee = newVal.fee;
      this.rtype = newVal.type;
    }

  },
  methods: { ...Object(external_vuex_["mapActions"])(['toggleAddGuest', 'loadGuestsPaginated', 'loadguestsrooms']),

    async newGuest() {
      const config = {
        headers: {
          'X-CSRF-TOKEN': this.getToken
        }
      };
      const bodyParameters = this.form;

      try {
        await this.$swal.fire({
          title: 'Adding New Guest?',
          text: `${this.form.fullname} for Period of  ${this.form.rdays} days in ${this.form.Room.type} ${this.form.Room.roomNo} .You won't be able to revert this!`,
          icon: 'warning',
          showCancelButton: true,
          confirmButtonText: 'Yes, Add!',
          cancelButtonText: 'No, cancel!',
          reverseButtons: true,
          showLoaderOnConfirm: true,
          preConfirm: event => {
            this.$axios.$post('newGuest', bodyParameters, config).then(({
              result,
              message
            }) => {
              if (result == true) {
                this.$toast.success(message);
                this.loadGuestsPaginated();
                this.toggleAddGuest();
                this.loadguestsrooms();
              }
            }).catch(errors => {
              this.$swal.showValidationMessage(`Request failed: ${errors}`);

              if (errors.response.data.message) {
                this.$toast.error(this.$ObjTemplate.trim(errors.response.data.message));
              } else {
                this.$toast.error(this.$ObjTemplate.trim(errors.response.request.statusText));
              }
            });
          },
          allowOutsideClick: () => !this.$swal.isLoading()
        }).then(result => {
          if (result.isConfirmed) {
            this.$swal.fire('Saved!', 'Guest is added.', 'success');
          } else if (result.dismiss == this.$swal.DismissReason.cancel) {
            this.$swal.fire('Cancelled', 'Guest is not added! :)', 'error');
          }
        });
      } catch (e) {
        // eslint-disable-next-line no-console
        console.log(e);
      }
    }

  }
});
// CONCATENATED MODULE: ./components/reception/AddGuest.vue?vue&type=script&lang=js&
 /* harmony default export */ var reception_AddGuestvue_type_script_lang_js_ = (AddGuestvue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/@nuxt/webpack/node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__(1);

// CONCATENATED MODULE: ./components/reception/AddGuest.vue



function injectStyles (context) {
  
  
}

/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  reception_AddGuestvue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  injectStyles,
  "2d55c02a",
  "13a03a6f"
  
)

/* harmony default export */ var AddGuest = __webpack_exports__["default"] = (component.exports);

/***/ })

};;
//# sourceMappingURL=reception-add-guest.js.map
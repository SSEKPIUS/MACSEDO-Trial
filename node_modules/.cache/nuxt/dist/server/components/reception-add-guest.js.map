{"version":3,"file":"components/reception-add-guest.js","sources":["webpack:///./components/reception/AddGuest.vue?4481","webpack:///./components/reception/AddGuest.vue","webpack:///./components/reception/AddGuest.vue?2f39","webpack:///./components/reception/AddGuest.vue?6cb8"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"p-10 shadow-xl shadow-yellow-300 w-6/12 sm:w-1/2 rounded-xl h-auto\"},[_vm._ssrNode(\"<div class=\\\"m-2\\\" data-v-2d55c02a><h1 class=\\\"font-black text-yellow-800\\\" data-v-2d55c02a>\\n      New Guest\\n    </h1></div> \"),_vm._ssrNode(\"<div data-v-2d55c02a>\",\"</div>\",[_vm._ssrNode(\"<form data-v-2d55c02a>\",\"</form>\",[_vm._ssrNode(\"<div class=\\\" flex flex-row\\\" data-v-2d55c02a><div class=\\\"p-2 text-sm w-1/2\\\" data-v-2d55c02a><label for=\\\"FullName\\\" class=\\\"font-bold text-yellow-800 text-sm\\\" data-v-2d55c02a>FullName</label> <input id=\\\"FullName\\\" type=\\\"text\\\" required=\\\"required\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.fullname)))+\" class=\\\"py-3 pr-3 w-full border-b-2 border-gray-200 focus:outline-none hover:border-yellow-300\\\" data-v-2d55c02a></div> <div class=\\\"p-2 text-sm w-1/2\\\" data-v-2d55c02a><label for=\\\"Email\\\" class=\\\"font-bold text-yellow-800 text-sm\\\" data-v-2d55c02a>Email</label> <input id=\\\"Email\\\" type=\\\"email\\\" required=\\\"required\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.email)))+\" class=\\\"py-3 pr-3 w-full border-b-2 border-gray-200 focus:outline-none hover:border-yellow-300\\\" data-v-2d55c02a></div></div> \"),_vm._ssrNode(\"<div class=\\\" flex flex-row\\\" data-v-2d55c02a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"p-2 text-sm w-1/2\\\" data-v-2d55c02a>\",\"</div>\",[_vm._ssrNode(\"<label for=\\\"IDType\\\" class=\\\"font-bold text-yellow-800 text-sm\\\" data-v-2d55c02a>ID Type</label> \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.idType),expression:\"form.idType\"}],staticClass:\"py-3 pr-3 w-full border-b-2 border-gray-200 focus:outline-none hover:border-yellow-300\",attrs:{\"id\":\"IDType\",\"name\":\"\",\"required\":\"\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.form, \"idType\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"National ID\"}},[_vm._v(\"\\n              National ID\\n            \")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"PassPort\"}},[_vm._v(\"\\n              PassPort\\n            \")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"Drivers Permit\"}},[_vm._v(\"\\n              Drivers Permit\\n            \")])])],2),_vm._ssrNode(\" <div class=\\\"p-2 text-sm w-1/2\\\" data-v-2d55c02a><label for=\\\"IDNumber\\\" class=\\\"font-bold text-yellow-800 text-sm\\\" data-v-2d55c02a>NIN/PassPort/Drivers Permit Number</label> <input id=\\\"IDNumber\\\" type=\\\"text\\\" required=\\\"required\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.idNum)))+\" class=\\\"py-3 pr-3 w-full border-b-2 border-gray-200 focus:outline-none hover:border-yellow-300\\\" data-v-2d55c02a></div>\")],2),_vm._ssrNode(\" <div class=\\\"p-2 flex flex-row\\\" data-v-2d55c02a><div class=\\\"p-2 mb-3 text-sm w-full\\\" data-v-2d55c02a><label for=\\\"AOB\\\" class=\\\"font-bold text-yellow-800\\\" data-v-2d55c02a>Any Other Information</label> <textarea id=\\\"AOB\\\" type=\\\"text\\\" required=\\\"required\\\" class=\\\"py-3 pr-3 w-full border-b-2 border-gray-200 focus:outline-none hover:border-yellow-300\\\" data-v-2d55c02a>\"+_vm._ssrEscape(_vm._s(_vm.form.aob))+\"</textarea></div></div> \"),_vm._ssrNode(\"<div class=\\\"p-2 flex flex-row\\\" data-v-2d55c02a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"p-2 mb-3 text-sm w-1/2\\\" data-v-2d55c02a>\",\"</div>\",[_vm._ssrNode(\"<label for=\\\"rooms\\\" class=\\\"text-sm text-yellow-800 font-bold\\\" data-v-2d55c02a>Select Room</label> \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.Room),expression:\"form.Room\"}],staticClass:\"py-3 pr-3 w-full border-b-2 border-gray-200 focus:outline-none hover:border-yellow-300\",attrs:{\"id\":\"rooms\",\"name\":\"\",\"required\":\"\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.form, \"Room\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.roomlistFiltered),function(room,i){return _c('option',{key:i,domProps:{\"value\":room}},[_vm._v(\"\\n              \"+_vm._s(room.roomNo)+\" \"+_vm._s(room.type)+\" \"+_vm._s(room.beds)+\" Beds\\n            \")])}),0)],2),_vm._ssrNode(\" <div class=\\\"p-2 text-sm w-1/2\\\" data-v-2d55c02a><label for=\\\"fee\\\" class=\\\"font-bold text-yellow-800 text-sm\\\" data-v-2d55c02a>Type</label> <div class=\\\"py-3 pr-3 w-full border-b-2 border-gray-200 focus:outline-none hover:border-yellow-300\\\" data-v-2d55c02a>\"+_vm._ssrEscape(\"\\n            \"+_vm._s(_vm.rtype)+\"\\n          \")+\"</div></div>\")],2),_vm._ssrNode(\" <div class=\\\"p-2 flex flex-row\\\" data-v-2d55c02a><div class=\\\"p-2 text-sm w-1/2\\\" data-v-2d55c02a><label for=\\\"fee\\\" class=\\\"font-bold text-yellow-800 text-sm\\\" data-v-2d55c02a>Fee/Day</label> <div class=\\\"py-3 pr-3 w-full border-b-2 border-gray-200 focus:outline-none hover:border-yellow-300\\\" data-v-2d55c02a>\"+_vm._ssrEscape(\"\\n            \"+_vm._s(_vm.fee)+\"\\n          \")+\"</div></div> <div class=\\\"p-2 text-sm w-1/2\\\" data-v-2d55c02a><label for=\\\"fee\\\" class=\\\"font-bold text-yellow-800 text-sm\\\" data-v-2d55c02a>Days</label> <input type=\\\"Number\\\" min=\\\"1\\\" max=\\\"365\\\" required=\\\"required\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.rdays)))+\" class=\\\"py-3 pr-3 w-full border-b-2 border-gray-200 focus:outline-none hover:border-yellow-300\\\" data-v-2d55c02a></div></div> <div class=\\\"text-sm p-2\\\" data-v-2d55c02a></div> <div class=\\\"my-3\\\" data-v-2d55c02a><button type=\\\"submit\\\" class=\\\"p-3 bg-green-500 text-white rounded-lg px-32\\\" data-v-2d55c02a>\\n          Submit\\n        </button> <button class=\\\"p-3 bg-red-500 text-white rounded-lg px-32\\\" data-v-2d55c02a>\\n          Cancel\\n        </button></div>\")],2)])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* eslint-disable eqeqeq */\n/* eslint-disable no-console */\n/* eslint-disable vue/require-prop-types */\nimport _ from 'lodash'\nimport { mapActions, mapGetters } from 'vuex'\nexport default {\n  name: 'AddGuest',\n\n  data () {\n    return {\n      form: {\n        fullname: '',\n        Room: '',\n        idType: '',\n        idNum: '',\n        aob: '',\n        email: '',\n        rdays: 1\n      },\n      fee: '0',\n      rtype: 'null'\n    }\n  },\n\n  computed: {\n    ...mapGetters(['rooms', 'getToken']),\n\n    formRoom () { return this.form.Room },\n\n    roomlistFiltered () {\n      return _.filter(this.rooms, (r) => {\n        return r.occupied == false\n      })\n    }\n  },\n\n  watch: {\n    formRoom (newVal) {\n      this.fee = newVal.fee\n      this.rtype = newVal.type\n    }\n  },\n\n  methods: {\n    ...mapActions(['toggleAddGuest', 'loadGuestsPaginated', 'loadguestsrooms']),\n\n    async newGuest () {\n      const config = {\n        headers: { 'X-CSRF-TOKEN': this.getToken }\n      }\n      const bodyParameters = this.form\n      try {\n        await this.$swal.fire({\n          title: 'Adding New Guest?',\n          text: `${this.form.fullname} for Period of  ${this.form.rdays} days in ${this.form.Room.type} ${this.form.Room.roomNo} .You won't be able to revert this!`,\n          icon: 'warning',\n          showCancelButton: true,\n          confirmButtonText: 'Yes, Add!',\n          cancelButtonText: 'No, cancel!',\n          reverseButtons: true,\n          showLoaderOnConfirm: true,\n          preConfirm: (event) => {\n            this.$axios.$post('newGuest', bodyParameters, config)\n              .then(({ result, message }) => {\n                if (result == true) {\n                  this.$toast.success(message)\n                  this.loadGuestsPaginated()\n                  this.toggleAddGuest()\n                  this.loadguestsrooms()\n                }\n              })\n              .catch((errors) => {\n                this.$swal.showValidationMessage(`Request failed: ${errors}`)\n                if (errors.response.data.message) {\n                  this.$toast.error(this.$ObjTemplate.trim(errors.response.data.message))\n                } else {\n                  this.$toast.error(this.$ObjTemplate.trim(errors.response.request.statusText))\n                }\n              })\n          },\n          allowOutsideClick: () => !this.$swal.isLoading()\n        }).then((result) => {\n          if (result.isConfirmed) {\n            this.$swal.fire(\n              'Saved!',\n              'Guest is added.',\n              'success'\n            )\n          } else if (result.dismiss == this.$swal.DismissReason.cancel) {\n            this.$swal.fire(\n              'Cancelled',\n              'Guest is not added! :)',\n              'error'\n            )\n          }\n        })\n      } catch (e) {\n      // eslint-disable-next-line no-console\n        console.log(e)\n      }\n    }\n  }\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/@nuxt/webpack/node_modules/vue-loader/lib/index.js??vue-loader-options!./AddGuest.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/@nuxt/webpack/node_modules/vue-loader/lib/index.js??vue-loader-options!./AddGuest.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddGuest.vue?vue&type=template&id=2d55c02a&scoped=true&\"\nimport script from \"./AddGuest.vue?vue&type=script&lang=js&\"\nexport * from \"./AddGuest.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@nuxt/webpack/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"2d55c02a\",\n  \"13a03a6f\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AAXA;AAaA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAYA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AADA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5BA;AA8BA;AACA;AAKA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1DA;AAtCA;;AClHA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}